<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>çœ‹æˆ¿ç®¡å®¶</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#3b82f6">
<style>
body{font-family:-apple-system,BlinkMacSystemFont;padding:15px;background:#f1f5f9;}
input,select,button{width:100%;padding:8px;margin:4px 0;border-radius:6px;border:1px solid #ccc;}
.card{background:#fff;border-radius:10px;padding:10px;margin-top:10px;box-shadow:0 0 5px rgba(0,0,0,.1);}
button{background:#3b82f6;color:white;font-weight:bold}
</style>
</head>
<body>

<h2>ğŸ  çœ‹æˆ¿ç®¡å®¶</h2>

<div class="card">
  <input id="name" placeholder="å»ºæ¡ˆåç¨±">
  <input id="area" placeholder="å€åŸŸ">
  <input id="type" placeholder="æˆ¿å‹">
  <input id="price" type="number" placeholder="ç¸½é‡‘é¡(è¬)">
  <input id="households" type="number" placeholder="ç¸½æˆ¶æ•¸">
  <input id="floor" placeholder="æ¨“å±¤">
  <input id="deed" type="number" placeholder="æ¬Šç‹€åªæ•¸">
  <input id="indoor" type="number" placeholder="å®¤å…§åªæ•¸">
  <input id="balcony" type="number" placeholder="é™½å°åªæ•¸">

  <select id="car">
    <option>ç„¡</option><option>å¹³é¢</option><option>æ©Ÿæ¢°</option>
  </select>

  <select id="bike">
    <option>ç„¡</option><option>æˆ¶å¤–</option><option>å®¤å…§</option>
  </select>

  <button onclick="save()">æ–°å¢å»ºæ¡ˆ</button>
</div>

<div id="list"></div>

<script>
let data = JSON.parse(localStorage.getItem("houses")||"[]");

function save(){
  let h={
    name:name.value,area:area.value,type:type.value,
    price:+price.value,households:households.value,floor:floor.value,
    deed:+deed.value,indoor:+indoor.value,balcony:+balcony.value,
    car:car.value,bike:bike.value
  };
  data.push(h);
  localStorage.setItem("houses",JSON.stringify(data));
  render();
}

function del(i){
  data.splice(i,1);
  localStorage.setItem("houses",JSON.stringify(data));
  render();
}

function render(){
  list.innerHTML="";
  data.forEach((h,i)=>{
    let pub = ((h.deed-h.indoor-h.balcony)/h.deed*100).toFixed(1);
    let unit = (h.price/h.indoor).toFixed(1);
    list.innerHTML += `
    <div class="card">
      <b>${h.name}</b> ${h.area} ${h.type}<br>
      ç¸½åƒ¹:${h.price}è¬ | å®¤å…§å–®åƒ¹:${unit}è¬<br>
      å…¬è¨­æ¯”:${pub}% | è»Šä½:${h.car} | æ©Ÿè»Š:${h.bike}<br>
      <button onclick="del(${i})">åˆªé™¤</button>
    </div>`;
  });
}
render();

if('serviceWorker' in navigator){
  navigator.serviceWorker.register('service-worker.js');
}
</script>
</body>
</html>
